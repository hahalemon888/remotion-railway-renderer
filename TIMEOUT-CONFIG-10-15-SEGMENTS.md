# ğŸ¯ è¶…æ—¶é…ç½® - 10-15ç‰‡æ®µè§†é¢‘ä¼˜åŒ–ï¼ˆæ–¹æ¡ˆBï¼‰

> **æœ€åæ›´æ–°**: 2025-10-25  
> **é…ç½®æ–¹æ¡ˆ**: æ–¹æ¡ˆB - å¹³è¡¡æ€§èƒ½  
> **é€‚ç”¨åœºæ™¯**: 8-15ä¸ªè§†é¢‘ç‰‡æ®µ

---

## ğŸ“Š å®æµ‹æ•°æ®åŸºç¡€

### æ€§èƒ½åŸºå‡†æµ‹è¯•
| æµ‹è¯•åœºæ™¯ | ç‰‡æ®µæ•° | å®é™…è€—æ—¶ | é…ç½®æ–¹æ¡ˆ | ç»“æœ |
|---------|-------|---------|---------|------|
| åˆå§‹æµ‹è¯• | 3ç‰‡æ®µ | 4åˆ†30ç§’ | æ–¹æ¡ˆB âœ… | æˆåŠŸ |
| ç›®æ ‡åœºæ™¯ | 10-15ç‰‡æ®µ | é¢„è®¡15-22åˆ†é’Ÿ | æ–¹æ¡ˆB ğŸ¯ | å¾…éªŒè¯ |

### è®¡ç®—ä¾æ®
- **æ¯ç‰‡æ®µå¹³å‡æ—¶é—´**: 90ç§’ï¼ˆåŸºäº3ç‰‡æ®µæµ‹è¯•ï¼‰
- **å®‰å…¨ç³»æ•°**: 1.3xï¼ˆé¢„ç•™30%ç¼“å†²ï¼‰
- **æ¨ç®—å…¬å¼**: `(ç‰‡æ®µæ•° Ã— 90ç§’) Ã— 1.3`

---

## âš™ï¸ å½“å‰è¶…æ—¶é…ç½®ï¼ˆæ–¹æ¡ˆBï¼‰

### 1ï¸âƒ£ å…¨å±€é…ç½® - `remotion.config.ts`

```typescript
// æ•´ä½“æ¸²æŸ“è¶…æ—¶: 30åˆ†é’Ÿ
Config.setTimeoutInMilliseconds(1800000);

// å•ä¸ªèµ„æºä¸‹è½½è¶…æ—¶: 240ç§’ï¼ˆ4åˆ†é’Ÿï¼‰
Config.setDelayRenderTimeoutInMilliseconds(240000);
```

**é…ç½®è¯´æ˜**ï¼š
- âœ… **30åˆ†é’Ÿæ•´ä½“è¶…æ—¶** - è¶³å¤Ÿæ¸²æŸ“15ä¸ªç‰‡æ®µï¼ˆé¢„è®¡22åˆ†é’Ÿï¼‰
- âœ… **240ç§’èµ„æºè¶…æ—¶** - æ”¯æŒ50-100MBçš„å¤§è§†é¢‘æ–‡ä»¶ä¸‹è½½
- âœ… **512MBè§†é¢‘ç¼“å­˜** - é¿å…å†…å­˜æº¢å‡º

---

### 2ï¸âƒ£ æ¸²æŸ“å™¨é…ç½® - `server/index.js`

```javascript
await renderMedia({
  // 1. æ•´ä½“æ¸²æŸ“è¶…æ—¶: 30åˆ†é’Ÿ
  timeoutInMilliseconds: 1800000,
  
  // 2. å•ä¸ªèµ„æºä¸‹è½½è¶…æ—¶: 240ç§’
  delayRenderTimeoutInMilliseconds: 240000,
  
  // 3. è§†é¢‘ç¼“å­˜é™åˆ¶: 512MB
  offthreadVideoCacheSizeInBytes: 512 * 1024 * 1024,
  
  chromiumOptions: {
    args: [
      '--timeout=240000',  // Chromium ç½‘ç»œè¶…æ—¶
      // ... å…¶ä»–å‚æ•°
    ],
    timeout: 240000,  // Puppeteer è¶…æ—¶
  }
});
```

---

## ğŸ“ˆ ä¸åŒç‰‡æ®µæ•°çš„é¢„æœŸè¡¨ç°

| ç‰‡æ®µæ•° | é¢„è®¡æ€»æ—¶é—´ | èµ„æºè¶…æ—¶ | æ•´ä½“è¶…æ—¶ | æˆåŠŸç‡é¢„æµ‹ |
|--------|-----------|---------|---------|-----------|
| **3ç‰‡æ®µ** | 4.5åˆ†é’Ÿ âœ… | 240ç§’ | 30åˆ†é’Ÿ | 99% |
| **5ç‰‡æ®µ** | 7.5åˆ†é’Ÿ | 240ç§’ | 30åˆ†é’Ÿ | 95%+ |
| **8ç‰‡æ®µ** | 12åˆ†é’Ÿ | 240ç§’ | 30åˆ†é’Ÿ | 90%+ |
| **10ç‰‡æ®µ** | 15åˆ†é’Ÿ | 240ç§’ | 30åˆ†é’Ÿ | 85%+ |
| **12ç‰‡æ®µ** | 18åˆ†é’Ÿ | 240ç§’ | 30åˆ†é’Ÿ | 80%+ |
| **15ç‰‡æ®µ** | 22.5åˆ†é’Ÿ | 240ç§’ | 30åˆ†é’Ÿ | 75%+ |

> âš ï¸ **æ³¨æ„**: å¦‚æœç‰‡æ®µæ•°è¶…è¿‡15ä¸ªï¼Œå»ºè®®å‡çº§åˆ°**æ–¹æ¡ˆAï¼ˆä¿å®ˆå®‰å…¨ï¼‰**

---

## ğŸ”„ æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆAï¼šä¿å®ˆå®‰å…¨ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰
```javascript
timeoutInMilliseconds: 2400000,              // 40åˆ†é’Ÿ
delayRenderTimeoutInMilliseconds: 300000,    // 5åˆ†é’Ÿ
```
**é€‚ç”¨åœºæ™¯**ï¼š
- 15-20ä¸ªç‰‡æ®µ
- å¤§å‹è§†é¢‘æ–‡ä»¶ï¼ˆ>100MBï¼‰
- ç½‘ç»œä¸ç¨³å®šç¯å¢ƒ
- é¦–æ¬¡å°è¯•ï¼Œä¸ç¡®å®šè€—æ—¶

### æ–¹æ¡ˆBï¼šå¹³è¡¡æ€§èƒ½ï¼ˆå½“å‰æ–¹æ¡ˆï¼‰âœ…
```javascript
timeoutInMilliseconds: 1800000,              // 30åˆ†é’Ÿ
delayRenderTimeoutInMilliseconds: 240000,    // 4åˆ†é’Ÿ
```
**é€‚ç”¨åœºæ™¯**ï¼š
- âœ… **8-15ä¸ªç‰‡æ®µ**ï¼ˆæ¨èï¼‰
- âœ… ä¸­ç­‰å¤§å°è§†é¢‘ï¼ˆ20-80MBï¼‰
- âœ… ç½‘ç»œç¨³å®š
- âœ… å·²æµ‹è¯•è¿‡3ç‰‡æ®µï¼Œäº†è§£å¹³å‡è€—æ—¶

### æ–¹æ¡ˆCï¼šå¿«é€Ÿæ¨¡å¼ï¼ˆå°è§†é¢‘ä¸“ç”¨ï¼‰
```javascript
timeoutInMilliseconds: 900000,               // 15åˆ†é’Ÿ
delayRenderTimeoutInMilliseconds: 120000,    // 2åˆ†é’Ÿ
```
**é€‚ç”¨åœºæ™¯**ï¼š
- 3-5ä¸ªç‰‡æ®µ
- å°å‹è§†é¢‘æ–‡ä»¶ï¼ˆ<20MBï¼‰
- ç½‘ç»œæä½³
- è¿½æ±‚å¿«é€Ÿå“åº”

---

## ğŸš¨ å¸¸è§é—®é¢˜å¤„ç†

### âŒ é”™è¯¯1: "Tried to download file, but the server sent no data for X seconds"
**åŸå› **: å•ä¸ªèµ„æºä¸‹è½½è¶…æ—¶
**è§£å†³**:
```javascript
// å¢åŠ èµ„æºä¸‹è½½è¶…æ—¶
delayRenderTimeoutInMilliseconds: 300000,  // ä»240ç§’å¢åŠ åˆ°300ç§’
```

### âŒ é”™è¯¯2: "Timeout: Rendering exceeded X milliseconds"
**åŸå› **: æ•´ä½“æ¸²æŸ“è¶…æ—¶
**è§£å†³**:
```javascript
// å¢åŠ æ•´ä½“è¶…æ—¶
timeoutInMilliseconds: 2400000,  // ä»30åˆ†é’Ÿå¢åŠ åˆ°40åˆ†é’Ÿ
```

### âŒ é”™è¯¯3: å†…å­˜æº¢å‡º (OOM)
**åŸå› **: è§†é¢‘ç¼“å­˜è¿‡å¤§
**è§£å†³**:
```javascript
// 1. é™ä½åˆ†è¾¨ç‡
renderOptions: { scale: 0.5 }

// 2. å‡å°‘è§†é¢‘ç¼“å­˜
offthreadVideoCacheSizeInBytes: 256 * 1024 * 1024  // ä»512MBé™åˆ°256MB

// 3. å¢åŠ  Railway å†…å­˜åˆ° 1GB+
```

---

## ğŸ“Š ç›‘æ§å»ºè®®

### æˆåŠŸæ ‡å‡†
- âœ… æ¸²æŸ“æˆåŠŸç‡ > 85%
- âœ… å¹³å‡æ¸²æŸ“æ—¶é—´ < 20åˆ†é’Ÿï¼ˆ10ç‰‡æ®µï¼‰
- âœ… æ— å†…å­˜æº¢å‡ºé”™è¯¯
- âœ… æ— èµ„æºä¸‹è½½è¶…æ—¶

### éœ€è¦ä¼˜åŒ–çš„ä¿¡å·
- âš ï¸ æˆåŠŸç‡ < 70%
- âš ï¸ é¢‘ç¹å‡ºç° "no data" é”™è¯¯
- âš ï¸ æ¸²æŸ“æ—¶é—´è¶…è¿‡é¢„æœŸ 50%+
- âš ï¸ å†…å­˜ä½¿ç”¨ > 90%

**ä¼˜åŒ–æªæ–½**ï¼šåˆ‡æ¢åˆ°æ–¹æ¡ˆAï¼ˆä¿å®ˆå®‰å…¨ï¼‰

---

## ğŸ”§ å¿«é€Ÿè°ƒæ•´æŒ‡ä»¤

### å¦‚éœ€å‡çº§åˆ°æ–¹æ¡ˆAï¼ˆä¿å®ˆå®‰å…¨ï¼‰
```bash
# 1. ä¿®æ”¹ remotion.config.ts
Config.setTimeoutInMilliseconds(2400000);                    # 40åˆ†é’Ÿ
Config.setDelayRenderTimeoutInMilliseconds(300000);          # 5åˆ†é’Ÿ

# 2. ä¿®æ”¹ server/index.js
timeoutInMilliseconds: 2400000,
delayRenderTimeoutInMilliseconds: 300000,
timeout: 300000,  // Puppeteer

# 3. éƒ¨ç½²
git add . && git commit -m "å‡çº§åˆ°æ–¹æ¡ˆA" && git push
```

### å¦‚éœ€é™çº§åˆ°æ–¹æ¡ˆCï¼ˆå¿«é€Ÿæ¨¡å¼ï¼‰
```bash
# 1. ä¿®æ”¹ remotion.config.ts
Config.setTimeoutInMilliseconds(900000);                     # 15åˆ†é’Ÿ
Config.setDelayRenderTimeoutInMilliseconds(120000);          # 2åˆ†é’Ÿ

# 2. ä¿®æ”¹ server/index.js
timeoutInMilliseconds: 900000,
delayRenderTimeoutInMilliseconds: 120000,
timeout: 120000,  // Puppeteer

# 3. éƒ¨ç½²
git add . && git commit -m "åˆ‡æ¢åˆ°æ–¹æ¡ˆC" && git push
```

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | é…ç½® | è¯´æ˜ |
|-----|------|------|------|
| v1.0 | 2025-10-24 | 180ç§’èµ„æºè¶…æ—¶ | ä¿®å¤ "20ç§’è¶…æ—¶" é”™è¯¯ |
| **v2.0** | **2025-10-25** | **240ç§’èµ„æºè¶…æ—¶** | **ä¼˜åŒ–10-15ç‰‡æ®µæ”¯æŒï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰** |

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. âœ… **å·²éƒ¨ç½²æ–¹æ¡ˆB** - æµ‹è¯•10ä¸ªç‰‡æ®µè§†é¢‘
2. â³ **ç›‘æ§æˆåŠŸç‡** - è§‚å¯ŸRailwayæ—¥å¿—
3. â³ **è®°å½•å®é™…è€—æ—¶** - ç”¨äºè¿›ä¸€æ­¥ä¼˜åŒ–
4. â³ **æ ¹æ®ç»“æœè°ƒæ•´** - å¿…è¦æ—¶å‡çº§åˆ°æ–¹æ¡ˆA

---

**é…ç½®å®Œæˆï¼** ç°åœ¨å¯ä»¥æ”¯æŒ **8-15ä¸ªç‰‡æ®µ** çš„è§†é¢‘æ¸²æŸ“äº† ğŸ‰

